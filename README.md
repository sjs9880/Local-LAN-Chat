# 파이썬 로컬 P2P 메신저 (Local LAN Chat) v2.0

동일 네트워크(LAN) 내에서 외부 서버 없이 동작하는 완전한 **크로스 플랫폼(Windows, Linux, macOS) 지원** 탈중앙화 채팅 및 파일 공유 프로그램입니다.

## 🚀 주요 기능 (Core Features)

### 1. 로비 및 비밀번호 기반 암호화 세션 (Lobby & Rooms)
* **로비 시스템 (Lobby)**: 앱 실행 시 기본적으로 로비에 진입하여 현재 개설된 그룹 방 목록을 확인하고 원하는 방에 참여하거나 새로운 방을 생성할 수 있습니다.
* **비밀번호 기반 암호화 (Encrypted Rooms)**: 방 생성 시 비밀번호를 설정할 수 있으며, 이 경우 통신(채팅 및 파일 전송) 시 데이터가 암호화되어 안전하게 보호됩니다.
* **자동 피어 탐색**: 방에 입장하면 서버 없이 UDP 브로드캐스트를 통해 같은 방에 있는 사용자들을 자동으로 감지하여 세션을 형성합니다.

### 2. 탈중앙화 P2P 채팅 (Decentralized Chat)
* **분산된 채팅 로그**: 대화 기록 및 입장/퇴장 정보는 중앙 서버 없이 참여자 간 실시간 P2P로 동기화됩니다. 나중에 들어온 사용자에게도 기존 사용자가 P2P로 과거 채팅 내역을 전달해 줍니다.
* **IP 기반 짧은 ID 식별(Short ID)**: 동일한 닉네임을 사용하는 유저를 구분하기 위해 사용자 닉네임 옆에 IP 주소 뒷자리 기반 해시값(예: `#000.000`)을 표시하여 고유하게 식별합니다.
* **이름 및 환경설정 저장**: 앱을 껐다가 켜도 로비 화면에서 설정한 닉네임(`config.json`)이 그대로 유지됩니다.

### 3. 고도화된 파일 공유 (Advanced File Transfer)
* **파일 및 다중 폴더 전송**: 채팅 내 **공유** 버튼(플로팅 메뉴)을 통해 단일/다중 파일 및 전체 폴더를 손쉽게 전송할 수 있으며, 이 때 백엔드 엔진이 자동으로 `zip`으로 압축하여 전송을 준비합니다.
* **전송 승인 (Accept & Reject)**: 파일이 공유되면 즉시 다운로드되지 않고, 다운로더가 `[다운로드]` 버튼을 눌러 승인해야 스트림 전송이 시작됩니다. 
* **공유 취소 (Cancel Share)**: 파일을 공유한 업로더가 마음이 바뀌면 언제든 `[공유 취소]` 버튼을 눌러 다른 사용자들이 더 이상 다운로드하지 못하게 막고, 채팅창에서 파일을 '만료 상태'로 전환할 수 있습니다.
* **다운로더 정보 공유 (Download tracking)**: 누군가 파일을 다운로드 완료하면, 해당 사실이 채팅방에 브로드캐스트되어 파일 메시지 하단에 '누가 다운로드했는지' 아이콘과 함께 표시됩니다.

## 🎨 사용성 및 인터페이스 (UX/UI)
* **CustomTkinter 적용**: 기존 Tkinter 대비 현대적이고 세련된 다크/라이트 모드 지원 데스크톱 사용자 인터페이스(UI)를 제공합니다.
* **분리된 패널 디자인**: 우측의 '채팅 및 파일 뷰', 좌측의 '참여자 목록(User List)'으로 구성되어 쾌적한 화면 분할을 자랑합니다. 모달이나 알림 창을 최소화하고 채팅 공간 안에서 파일 수락 및 상태 업데이트가 자연스럽게 이뤄지도록 구성했습니다.

## 📦 실행 방법

1. Python 3.10+ 설치 권장
2. 요구 패키지 설치:
   ```bash
   pip install -r requirements.txt
   ```
3. 어플리케이션 실행:
   ```bash
   python main.py
   ```
4. 포터블 실행 파일(`exe`) 빌드 시 (PyInstaller 사용):
   ```bash
   pip install pyinstaller
   pyinstaller --noconsole --onefile main.py
   ```
